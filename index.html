<!DOCTYPE html>

<html lang="en">
  <head prefix="og: http://ogp.me/ns#">
    <meta charset="utf-8" />

    <meta
      name="viewport"
      content="minimum-scale=1, initial-scale=1, width=device-width"
    />

    <meta name="description" content="A sketching canvas." />
    <meta property="og:description" content="A sketching canvas." />

    <meta
      property="og:image"
      content="https://kanvas.b-hood.site/favicon.png"
    />

    <meta property="og:title" content="kanvas" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://kanvas.b-hood.site/" />

    <meta name="twitter:card" content="summary" />

    <link rel="apple-touch-icon" href="favicon.png" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="manifest" href="manifest.json" />

    <title>kanvas</title>
  </head>

  <body>
    <a
      href="https://scrapbox.io/hata6502/kanvas"
      rel="noreferrer"
      target="_blank"
    >
      <h1>kanvas</h1>
    </a>

    <button id="open-button">Open</button>
    <kanvas-dialog id="dialog"></kanvas-dialog>

    <script type="module">
      import "./dist/index.js";

      const dialog = document.querySelector("#dialog");
      const openButton = document.querySelector("#open-button");

      dialog.addEventListener("kanvasHistoryChange", (event) =>
        localStorage.setItem(
          "kanvas-image",
          event.detail.history[event.detail.historyIndex]
        )
      );

      openButton.addEventListener("click", () => {
        const image = localStorage.getItem("kanvas-image");

        if (image) {
          dialog.setAttribute("src", image);
        }

        dialog.setAttribute("open", "");
      });
    </script>
  </body>
</html>
